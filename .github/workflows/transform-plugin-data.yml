name: Transform Plugin Data

on:
  schedule:
    # 每小时执行一次 (UTC时间)
    - cron: '0 * * * *'
  workflow_dispatch: # 允许手动触发

permissions:
  contents: write
  actions: read

jobs:
  transform-data:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.PAT_TOKEN }}
        fetch-depth: 0

    - name: Transform plugin data (Python)
      run: python3 scripts/transform_plugin_data/run.py
      env:
        PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
